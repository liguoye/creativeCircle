webpackJsonp([25],{qRWv:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=/^1[345678]\d{9}$/,o={components:{navList:a("UlhK").a},props:{},data:function(){return{title:"",currentTab:"basicData",setType:"pass",formData:{phone:"",imgCode:"",code:"",setPass:"",confirmPass:"",qq:"",wx:""},dialogShow:!1,userInfo:{},userInfo2:{},src:"",codeCount:60,tt:null,showCode:!1,modalType:"",sign:""}},created:function(){this.getImg(),this.getUserInfo(),this.getHome()},methods:{submit:function(){switch(this.modalType){case"pass":this.changePassword();break;case"safepass":this.setSafePassword();break;case"qq":case"wx":this.setqq()}},changePassword:function(){var s=this;this.formData.setPass===this.formData.confirmPass?this.$ajax.post("/login/forget",{phone:this.formData.phone,code:this.formData.code,pwd:this.formData.setPass,Username:this.userInfo.Username}).then(function(t){t&&t.data&&1===t.data.code&&(console.log(t),s.formData={phone:"",imgCode:"",code:"",setPass:"",confirmPass:"",qq:"",wx:""},s.$notify.success({title:"修改成功"}),s.dialogShow=!1)}):this.$notify.error({title:"两次密码不一致"})},setSafePassword:function(){var s=this;this.formData.setPass===this.formData.confirmPass?this.$ajax.post("/shopmember/safePwd",{code:this.formData.code,pwd:this.formData.setPass,phone:this.userInfo.phone,sign:this.sign}).then(function(t){t&&t.data&&1===t.data.code&&(console.log(t),s.formData={phone:"",imgCode:"",code:"",setPass:"",confirmPass:"",qq:"",wx:""},s.$notify.success({title:"修改成功"}),s.dialogShow=!1)}):this.$notify.error({title:"两次密码不一致"})},setqq:function(){var s=this;this.$ajax.post("/ShopMember/upd",{qq:this.formData.qq,weixin:this.formData.wx}).then(function(t){t&&t.data&&1===t.data.code&&(console.log(t),s.formData={phone:"",imgCode:"",code:"",setPass:"",confirmPass:"",qq:"",wx:""},s.$notify.success({title:"设置成功"}),s.dialogShow=!1,s.getUserInfo())})},sendMsg:function(){var s=this;this.formData.phone&&e.test(this.formData.phone)?this.formData.imgCode?(this.showCode=!0,this.codeCount=60,this.tt=setInterval(function(){s.codeCount=s.codeCount-1,s.codeCount<=0&&(s.showCode=!1,clearInterval(s.tt))},1e3),this.$ajax.post("login/sendSms",{phone:this.formData.phone,code:this.formData.imgCode,sign:this.sign}).then(function(t){1===t.data.code&&s.$notify({title:"发送成功",type:"success"})})):this.$message.error("请输入图片验证码"):this.$message.error("请输入正确的手机号码")},getImg:function(){for(var s,t=Date.now(),a="",e=1;e<=4;e++)s=parseInt(10*Math.random()),a+="1234567890".charAt(s);var o=t+a;this.sign=o,this.src="http://h5om.knowsea.cn/shop/login/Verify?sign="+o},getUserInfo:function(){var s=this;this.$ajax.get("/shopmember/memberInfo").then(function(t){t&&t.data&&1===t.data.code&&(console.log(t),s.userInfo=t.data.data,s.formData.qq=t.data.data.QQToken,s.formData.wx=t.data.data.wx)})},getHome:function(){var s=this;this.$ajax.get("/shopmember/index").then(function(t){t&&t.data&&1===t.data.code&&(s.userInfo2=t.data.data)})},navListClick:function(s){this.$router.push({name:s,param:{tab:s}})},btnClick:function(s){switch(this.dialogShow=!0,this.setType=s,this.modalType=s,s){case"pass":this.title="修改登陆密码";break;case"safepass":this.title="设置交易密码";break;case"qq":this.title="设置qq";break;case"wx":this.title="设置微信"}},dialogClose:function(){this.$emit("dialogClose",!1)}}},n={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"basicData"},[a("el-row",[a("el-col",{staticClass:"navList",attrs:{span:4}},[a("nav-list",{attrs:{"current-tab":s.currentTab}})],1),s._v(" "),a("el-col",{staticClass:"accountManage",attrs:{span:18}},[a("el-row",[a("el-col",{staticClass:"accountManageLeft",attrs:{span:14}},[a("p",[a("span",{staticClass:"left"},[s._v("姓名：")]),s._v(" "),a("span",{staticClass:"right"},[s._v(s._s(s.userInfo.TrueName))])]),s._v(" "),a("p",[a("span",{staticClass:"left"},[s._v("会员名：")]),s._v(" "),a("span",{staticClass:"right"},[s._v(s._s(s.userInfo.Username))])]),s._v(" "),a("p",[a("span",{staticClass:"left"},[s._v("总资产：")]),s._v(" "),a("span",{staticClass:"right"},[s._v(s._s(s.userInfo.Money/100+s.userInfo2.MinLi/100)+"（存款＋发布点）")])]),s._v(" "),a("p",[a("span",{staticClass:"left"},[s._v("登录密码：")]),s._v(" "),a("span",{staticClass:"right"},[s._v("已设置")]),s._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){return s.btnClick("pass")}}},[s._v("修改")])],1),s._v(" "),a("p",[a("span",{staticClass:"left"},[s._v("支付密码：")]),s._v(" "),a("span",{staticClass:"right"},[s._v("已设置")]),s._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){return s.btnClick("safepass")}}},[s._v(s._s(""==s.userInfo.SafePwd?"设置":"修改"))])],1),s._v(" "),a("p",[a("span",{staticClass:"left"},[s._v("QQ：")]),s._v(" "),a("span",{staticClass:"right"},[s._v(s._s(s.userInfo.QQToken))]),s._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){return s.btnClick("qq")}}},[s._v(s._s(""==s.userInfo.QQToken?"设置":"修改"))])],1),s._v(" "),a("p",[a("span",{staticClass:"left"},[s._v("微信：")]),s._v(" "),a("span",{staticClass:"right"},[s._v(s._s(s.userInfo.wx))]),s._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){return s.btnClick("wx")}}},[s._v(s._s(""==s.userInfo.wx?"设置":"修改"))])],1)]),s._v(" "),a("el-col",{staticClass:"accountManageRight",attrs:{span:10}},[a("div",{staticClass:"memberAccount"},[a("div",{staticClass:"con"},[a("p",[s._v("\n                帐户存款第：\n                "),a("span",{staticClass:"red"},[s._v(s._s(s.userInfo2.days))]),s._v(" 天\n              ")]),s._v(" "),a("p",[s._v("\n                帐户存款：\n                "),a("span",{staticClass:"red"},[s._v(s._s(s.userInfo2.Money/100))]),s._v(" 元\n              ")]),s._v(" "),a("p",[s._v("\n                账户发布点：\n                "),a("span",{staticClass:"red"},[s._v(s._s(s.userInfo2.MinLi/100))]),s._v(" 个\n              ")]),s._v(" "),a("p",[s._v("\n                绑定店铺：\n                "),a("span",{staticClass:"red"},[s._v(s._s(s.userInfo2.shop_num))]),s._v(" 个\n              ")]),s._v(" "),a("p",[s._v("\n                高危预警：\n                "),a("a",{staticClass:"red",attrs:{href:"#/business/premium-task/warning"}},[s._v(s._s(s.userInfo2.hide))]),s._v("\n                个\n              ")])])])])],1)],1)],1),s._v(" "),a("div",{staticClass:"settingDialogCom"},[a("el-dialog",{attrs:{title:s.title,visible:s.dialogShow},on:{"update:visible":function(t){s.dialogShow=t},close:s.dialogClose}},[a("div",{staticClass:"content"},["pass"==s.setType||"safepass"==s.setType?a("el-row",[a("el-col",{attrs:{span:6}},[a("p",[s._v("电话号码：")])]),s._v(" "),a("el-col",{staticClass:"code-img",attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入电话号码"},model:{value:s.formData.phone,callback:function(t){s.$set(s.formData,"phone",t)},expression:"formData.phone"}})],1)],1):s._e(),s._v(" "),"pass"==s.setType||"safepass"==s.setType?a("el-row",[a("el-col",{attrs:{span:6}},[a("p",[s._v("验证码")])]),s._v(" "),a("el-col",{staticClass:"code-img",attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入图片验证码",maxlength:4},model:{value:s.formData.imgCode,callback:function(t){s.$set(s.formData,"imgCode",t)},expression:"formData.imgCode"}},[a("template",{slot:"append"},[a("img",{staticClass:"code-img",attrs:{src:s.src},on:{click:s.getImg}})])],2)],1)],1):s._e(),s._v(" "),"pass"==s.setType||"safepass"==s.setType?a("el-row",[a("el-col",{attrs:{span:6}},[a("p",[s._v("手机验证码")])]),s._v(" "),a("el-col",{staticClass:"code-img",attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入手机验证码",maxlength:4},model:{value:s.formData.code,callback:function(t){s.$set(s.formData,"code",t)},expression:"formData.code"}},[s.showCode?a("span",{staticClass:"count",staticStyle:{color:"red"},attrs:{slot:"append"},slot:"append"},[s._v(s._s(s.codeCount)+"S")]):a("span",{staticClass:"send",attrs:{slot:"append"},on:{click:s.sendMsg},slot:"append"},[s._v("获取验证码")])])],1)],1):s._e(),s._v(" "),"pass"==s.setType||"safepass"==s.setType?a("el-row",[a("el-col",{attrs:{span:6}},[a("p",[s._v("设置密码：")])]),s._v(" "),a("el-col",{staticClass:"code-img",attrs:{span:18}},[a("el-input",{attrs:{type:"password",maxlength:"11",placeholder:"请输入密码，6~11位"},model:{value:s.formData.setPass,callback:function(t){s.$set(s.formData,"setPass",t)},expression:"formData.setPass"}})],1)],1):s._e(),s._v(" "),"pass"==s.setType||"safepass"==s.setType?a("el-row",[a("el-col",{attrs:{span:6}},[a("p",[s._v("确认密码：")])]),s._v(" "),a("el-col",{staticClass:"code-img",attrs:{span:18}},[a("el-input",{attrs:{type:"password",maxlength:"11",placeholder:"请再次输入密码"},model:{value:s.formData.confirmPass,callback:function(t){s.$set(s.formData,"confirmPass",t)},expression:"formData.confirmPass"}})],1)],1):s._e(),s._v(" "),"qq"==s.setType?a("el-row",[a("el-col",{attrs:{span:6}},[a("p",[s._v("新QQ：")])]),s._v(" "),a("el-col",{staticClass:"code-img",attrs:{span:18}},[a("el-input",{attrs:{placeholder:""},model:{value:s.formData.qq,callback:function(t){s.$set(s.formData,"qq",t)},expression:"formData.qq"}})],1)],1):s._e(),s._v(" "),"wx"==s.setType?a("el-row",[a("el-col",{attrs:{span:6}},[a("p",[s._v("新微信号：")])]),s._v(" "),a("el-col",{staticClass:"code-img",attrs:{span:18}},[a("el-input",{attrs:{placeholder:""},model:{value:s.formData.wx,callback:function(t){s.$set(s.formData,"wx",t)},expression:"formData.wx"}})],1)],1):s._e()],1),s._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){s.dialogShow=!1}}},[s._v("取 消")]),s._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:s.submit}},[s._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(o,n,!1,function(s){a("sPQF")},"data-v-0f3ef51e",null);t.default=i.exports},sPQF:function(s,t){}});
//# sourceMappingURL=25.cad4ffd3b8b6d4c0e54a.js.map